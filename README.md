# andersen_lesson2
Deploy flask app using ansible


Репозиторий состоит из проекта Ansible(inventory,ansible.cfg) и роли в папке roles. Репозиторий готов прийти на помощь в случае если необходимо установить Hello World приложение(https://github.com/artemponevin/flask_app.git) на любое количество хостов.

Некоторые данные параметризированы, править нужно defaults/main.yml. Управлять приложением после установки предполагается через systemd unitfile. Соединение с управляемыми хостами прямое(джамп-хостов не предусмотрено). 

Для успешного запуска нужно:

1. Скачать этот репозиторий.
2. Внести правки в файл inventory.ini.
3. Настроить соединение с управляемым хостом(ключ или пароль).
4. Выбрать имя пользователя в домашнюю директорию которого будет установлено приложение(в defaults/main.yml).
5. Выбрать название установленного приложения(фактически имя systemd unit файла)(в defaults/main.yml).
6. Запустить: ansible-playbook roleplaybook.yml.

Сделано:

Параметризированы основные параметры.
Протестировано изменение имени пользователя для установки приложения.

TODO:

Handler не работает как положено. В качестве костыля добавлен избыточный блок с запуском приложения после выполнения всех действий и до проверок.

Запускать приложение не из под root.

Добавить в установку обратный прокси.

Параметризировать порт, накотором слушает приложение.a

